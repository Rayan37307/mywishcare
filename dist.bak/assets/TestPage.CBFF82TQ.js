import{r as i,j as s}from"./index.rlwCrqap.js";const u=async()=>{try{const e="https://wishcarebd.com/wp-json",r="ck_a4b2cb18008d89f593f65733819fecdf54658067",o="cs_f8e2f086aee52ae1fbb51d12594355306bffe498";console.log("Environment variables:"),console.log("- WP API URL:",e),console.log("- WC Consumer Key:",r),console.log("- WC Consumer Secret:",o?"[REDACTED]":"NOT SET");const c=`${e}/wc/v3/products?per_page=5&consumer_key=${r}&consumer_secret=${o}`;console.log("Testing endpoint:",c);const l=new AbortController,a=setTimeout(()=>l.abort(),1e4),t=await fetch(c,{method:"GET",headers:{Accept:"application/json"},signal:l.signal});if(clearTimeout(a),console.log("Response status:",t.status),console.log("Response headers:",[...t.headers.entries()]),!t.ok){const d=await t.text();throw new Error(`HTTP ${t.status}: ${d}`)}const n=await t.json();return console.log(`Successfully fetched ${n.length} products`),{success:!0,products:n,count:n.length}}catch(e){throw console.error("WooCommerce connection test failed:",e),e.name==="AbortError"?new Error("Request timed out after 10 seconds"):e}},g=()=>{const[e,r]=i.useState(!1),[o,c]=i.useState(null),[l,a]=i.useState(null),t=async()=>{r(!0),a(null),c(null);try{const n=await u();c(n)}catch(n){a(n.message||"Unknown error occurred")}finally{r(!1)}};return s.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[s.jsx("h1",{className:"text-3xl font-bold mb-6",children:"API Connection Test"}),s.jsx("button",{onClick:t,disabled:e,className:"px-4 py-2 bg-blue-500 text-white rounded mb-4 disabled:bg-gray-400",children:e?"Testing...":"Run Connection Test"}),l&&s.jsxs("div",{className:"p-4 bg-red-100 text-red-800 rounded mb-4",children:[s.jsx("strong",{children:"Error:"})," ",l]}),o&&s.jsxs("div",{className:"p-4 bg-green-100 text-green-800 rounded",children:[s.jsx("strong",{children:"Success!"})," Fetched ",o.count," products.",s.jsxs("details",{className:"mt-2",children:[s.jsx("summary",{children:"See details"}),s.jsx("pre",{className:"mt-2 p-2 bg-white rounded text-sm overflow-auto max-h-60",children:JSON.stringify(o,null,2)})]})]})]})};export{g as default};
