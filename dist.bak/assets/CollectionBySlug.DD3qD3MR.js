import{r as c,j as s,L as v,A as p,d as _,a as b,w as S,l as t}from"./index.rlwCrqap.js";const y=e=>{if(typeof e=="number")return e.toFixed(2);const r=e.replace(/[^\d.-]/g,""),a=parseFloat(r);return isNaN(a)?"0.00":a.toFixed(2)},m=(e,r="â‚¹")=>`${r}${y(e)}`,A=e=>e.sale_price&&e.sale_price!==""&&e.sale_price!==e.regular_price?parseFloat((e.sale_price||"0").replace(/[^\\d.-]/g,""))||0:parseFloat((e.price||"0").toString().replace(/[^\\d.-]/g,""))||0,j=e=>e.sale_price&&e.sale_price!==""&&e.sale_price!==e.regular_price&&parseFloat((e.regular_price||"0").replace(/[^\\d.-]/g,""))||0,h=e=>!!e.sale_price&&e.sale_price!==""&&e.sale_price!==e.regular_price&&parseFloat((e.sale_price||"0").replace(/[^\\d.-]/g,"")||"0")<parseFloat((e.regular_price||"0").replace(/[^\\d.-]/g,"")||"0"),N=e=>{if(!h(e))return 0;const r=j(e),a=A(e);return r-a},P=e=>{if(!h(e))return 0;const r=j(e);if(r===0)return 0;const a=N(e);return Math.round(a/r*100)},L=({product:e,onAddToCart:r})=>{const[a,o]=c.useState(!1),x=h(e),d=N(e),g=P(e),u=()=>e.images&&e.images.length>1&&a?e.images[1]?.src||e.images[0]?.src||p.DEFAULT_PRODUCT_IMAGE:e.images[0]?.src||p.DEFAULT_PRODUCT_IMAGE;return s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden p-2 flex flex-col transition-all h-full",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[s.jsxs(v,{to:`/products/${e.slug}`,children:[s.jsx("div",{className:"w-full aspect-[5/5.5] relative",children:s.jsx("img",{src:u(),alt:e.name,className:"w-full h-full object-cover rounded-lg transition-opacity duration-300"})}),s.jsxs("div",{className:"text-center flex-grow mt-2",children:[s.jsx("h3",{className:"text-[15px]",children:e.name}),s.jsx("p",{className:"text-[10px] text-black truncate",dangerouslySetInnerHTML:{__html:e.short_description}}),s.jsx("div",{className:"flex items-center justify-center gap-2 py-2",children:x?s.jsxs("div",{className:"flex flex-col justify-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-gray-500 text-[13px] leading-[20px] line-through mb-1",children:m(parseFloat(e.regular_price||"0"))}),s.jsx("span",{className:"text-gray-800 text-lg mb-2 mt-1",children:m(parseFloat(e.sale_price||"0"))})]}),s.jsxs("span",{className:"text-xs text-green-600",children:["Save ",m(d)," (",g,"%)"]})]}):s.jsx("p",{className:"text-black mb-2 mt-2",children:m(parseFloat(e.price.toString()))})})]})]}),(()=>{const n=e.stock_status==="outofstock";return s.jsxs("button",{className:`w-full py-2 uppercase rounded-md border-1 text-sm border-black flex justify-center items-center gap-2 ${n?"bg-gray-300 text-gray-500 border-gray-400 cursor-not-allowed":"bg-[#D4F871] hover:bg-[#c0e05d] transition-colors"}`,onClick:f=>{f.preventDefault(),n||r(e,1)},disabled:n,children:[n?"Out of Stock":"Add to cart",!n&&s.jsx("span",{className:"mb-[3px]",children:s.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",width:"15",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M4.75 8.25A.75.75 0 0 0 4 9L3 19.125c0 1.418 1.207 2.625 2.625 2.625h12.75c1.418 0 2.625-1.149 2.625-2.566L20 9a.75.75 0 0 0-.75-.75H4.75Zm2.75 0v-1.5a4.5 4.5 0 0 1 4.5-4.5v0a4.5 4.5 0 0 1 4.5 4.5v1.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})})()]})},E=()=>{const{slug:e}=_(),{addItem:r}=b(),[a,o]=c.useState([]),[x,d]=c.useState(!0),[g,u]=c.useState(null);c.useEffect(()=>{e&&(async()=>{d(!0),u(null);try{const l=await S.fetchProductsByCategorySlug(e);o(l)}catch(l){u(l instanceof Error?l.message:"Failed to fetch collection products")}finally{d(!1)}})()},[e]);const n=i=>i.split("-").map(l=>l.charAt(0).toUpperCase()+l.slice(1)).join(" "),f=()=>{if(!e)return"";switch(e.toLowerCase()){case t.BESTSELLERS:return"Best Sellers";case t.SUN_CARE:return"Sun Care";case t.LIP_BALM:return"Lip Balm";case t.HAIRFALL:return"Hair Fall";case t.ACNE:return"Acne";case t.PIGMENTATION:return"Pigmentation";case t.DANDRUFF:return"Dandruff";case t.DULL_SKIN:return"Dull Skin";case t.DETAN:return"De-tan";case t.DAMAGED_HAIR:return"Damaged Hair";case t.ALL_PRODUCTS:return"All Products";default:return n(e)}};return s.jsxs("div",{className:"md:px-10 max-md:px-4 pb-10",children:[s.jsx("h1",{className:"text-2xl font-bold mb-6 capitalize",children:f()}),g&&s.jsx("div",{className:"text-red-500 text-center py-10",children:s.jsxs("p",{children:["Error loading collection: ",g]})}),x?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:Array.from({length:8}).map((i,l)=>s.jsxs("div",{className:"bg-white rounded-lg overflow-hidden p-2",children:[s.jsx("div",{className:"animate-pulse bg-gray-200 aspect-[5/5.5] rounded-lg w-full"}),s.jsxs("div",{className:"text-center mt-2",children:[s.jsx("div",{className:"animate-pulse bg-gray-200 h-4 w-3/4 mx-auto mb-2 rounded"}),s.jsx("div",{className:"animate-pulse bg-gray-200 h-3 w-full mx-auto mb-3 rounded"}),s.jsx("div",{className:"animate-pulse bg-gray-200 h-8 w-full rounded-md mb-2"})]})]},l))}):a.length>0?s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:a.map(i=>s.jsx(L,{product:i,onAddToCart:r},i.id))}):s.jsx("div",{className:"text-center py-10",children:s.jsx("p",{children:"No products found in this collection."})})]})};export{E as default};
