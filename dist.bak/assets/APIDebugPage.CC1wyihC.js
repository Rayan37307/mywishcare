import{r as u,j as o,w as g}from"./index.rlwCrqap.js";const m=(t,s={})=>{const a="https://wishcarebd.com/wp-json",r="ck_a4b2cb18008d89f593f65733819fecdf54658067",d="cs_f8e2f086aee52ae1fbb51d12594355306bffe498",n=`/wc/v3${t}`,i=new URLSearchParams({...s,consumer_key:r,consumer_secret:d}),l=`${a}${n}?${i}`;return console.log(`Built WooCommerce API URL: ${l}`),l},b=async()=>{try{const t=m("/products",{per_page:"5"});console.log(`Testing WooCommerce API with URL: ${t}`);const s=await fetch(t,{method:"GET",headers:{Accept:"application/json"}});if(console.log(`API Response Status: ${s.status}`),console.log("API Response Headers:",[...s.headers.entries()]),!s.ok){const r=await s.text();throw console.error(`API Error Response: ${r}`),new Error(`HTTP ${s.status}: ${r}`)}const a=await s.json();return console.log(`API Success Response with ${a.length} products`),{success:!0,status:s.status,data:a,count:a.length}}catch(t){throw console.error("WooCommerce API Test Error:",t),t}},f=()=>{const[t,s]=u.useState(!1),[a,r]=u.useState(null),[d,n]=u.useState(null),i=async()=>{s(!0),n(null),r(null);try{console.log("Starting products test...");const e=await g.fetchProducts();console.log("Products fetched successfully:",e),r({type:"products",data:e,count:e.length})}catch(e){console.error("Error in testProducts:",e),n(e.message||"Failed to fetch products")}finally{s(!1)}},l=async e=>{s(!0),n(null),r(null);try{console.log(`Starting product ${e} test...`);const c=await g.fetchProductById(e,!0);console.log(`Product ${e} fetched successfully:`,c),r({type:"product",data:c})}catch(c){console.error(`Error in testProductById for ${e}:`,c),n(c.message||"Failed to fetch product")}finally{s(!1)}},h=async e=>{s(!0),n(null),r(null);try{console.log(`Starting search test for "${e}"...`);const c=await g.searchProducts(e);console.log(`Search for "${e}" completed:`,c),r({type:"search",data:c,count:c.length,term:e})}catch(c){console.error(`Error in testSearch for "${e}":`,c),n(c.message||"Failed to search products")}finally{s(!1)}},p=async()=>{s(!0),n(null),r(null);try{console.log("Starting direct API test...");const e=await b();console.log("Direct API test completed:",e),r({type:"direct_api",data:e})}catch(e){console.error("Error in testDirectAPI:",e),n(e.message||"Failed to test direct API")}finally{s(!1)}};return o.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[o.jsx("h1",{className:"text-3xl font-bold mb-6",children:"WooCommerce API Debug"}),o.jsxs("div",{className:"mb-8 p-4 bg-gray-100 rounded",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Test Actions"}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsx("button",{onClick:i,disabled:t,className:"px-4 py-2 bg-blue-500 text-white rounded disabled:bg-gray-400",children:t?"Testing...":"Test All Products"}),o.jsx("button",{onClick:()=>l(13),disabled:t,className:"px-4 py-2 bg-green-500 text-white rounded disabled:bg-gray-400",children:t?"Testing...":"Test Product #13"}),o.jsx("button",{onClick:()=>l(999999),disabled:t,className:"px-4 py-2 bg-purple-500 text-white rounded disabled:bg-gray-400",children:t?"Testing...":"Test Invalid Product"}),o.jsx("button",{onClick:()=>h("sun"),disabled:t,className:"px-4 py-2 bg-orange-500 text-white rounded disabled:bg-gray-400",children:t?"Testing...":'Search "sun"'}),o.jsx("button",{onClick:p,disabled:t,className:"px-4 py-2 bg-red-500 text-white rounded disabled:bg-gray-400",children:t?"Testing...":"Test Direct API"})]})]}),d&&o.jsxs("div",{className:"mb-6 p-4 bg-red-100 text-red-800 rounded",children:[o.jsx("h3",{className:"font-bold text-lg mb-2",children:"Error:"}),o.jsx("p",{children:d})]}),a&&o.jsxs("div",{className:"p-4 bg-gray-50 rounded",children:[o.jsx("h3",{className:"font-bold text-lg mb-2",children:"Response:"}),o.jsx("pre",{className:"text-sm overflow-auto max-h-96 bg-white p-4 rounded",children:JSON.stringify(a,null,2)})]})]})};export{f as default};
