import{r,k as v,e as P,z as t,j as e}from"./index.rlwCrqap.js";const k=()=>{const[a,f]=r.useState(""),[m,b]=r.useState(""),[u,p]=r.useState(!1),[w]=v(),[h,c]=r.useState(!0),o=w.get("key")||"",n=w.get("login")||"",d=P();r.useEffect(()=>{(!o||!n)&&(t.error("Invalid password reset link. Please try again."),setTimeout(()=>{d("/")},3e3))},[o,n,d]);const x=s=>{const i=s.length>=8,l=/[A-Z]/.test(s),y=/[a-z]/.test(s),j=/\d/.test(s);return i&&l&&y&&j},g=async s=>{if(s.preventDefault(),a!==m){t.error("Passwords do not match");return}if(!x(a)){c(!1),t.error("Password must be at least 8 characters with uppercase, lowercase, and number");return}p(!0);try{const l=await(await fetch("https://wishcarebd.com/wp-admin/admin-ajax.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`action=custom_reset_password&key=${encodeURIComponent(o)}&login=${encodeURIComponent(n)}&password=${encodeURIComponent(a)}`})).json();l.success?(t.success("Password reset successfully!"),setTimeout(()=>{d("/")},2e3)):t.error(l.data||"Failed to reset password")}catch(i){console.error("Password reset error:",i),t.error("Failed to reset password. Please try again.")}finally{p(!1)}};return e.jsxs("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center bg-black/30",children:[e.jsx("button",{onClick:()=>d("/"),className:"absolute top-6 right-6 z-50 bg-white/80 hover:bg-white text-gray-700 rounded-full shadow-md w-10 h-10 flex items-center justify-center backdrop-blur-md border border-gray-200 transition",children:"âœ•"}),e.jsxs("div",{className:"bg-gradient-to-b from-pink-100 via-[#EBE4FD] to-[#EBE4FD] p-6 backdrop-blur-[50px] rounded-lg w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Reset Your Password"}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Enter your new password below"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-left text-sm font-medium text-gray-700 mb-1",children:"New Password"}),e.jsx("div",{className:`flex items-center w-full border ${h?"border-gray-300":"border-red-500"} bg-gray-50 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-indigo-400`,children:e.jsx("input",{type:"password",id:"password",value:a,onChange:s=>{f(s.target.value),x(s.target.value)?c(!0):c(!1)},className:"flex-1 px-3 py-2 outline-none border-none bg-transparent",placeholder:"Enter new password",required:!0})}),!h&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Password must be at least 8 characters with uppercase, lowercase, and number"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-left text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),e.jsx("div",{className:"flex items-center w-full border border-gray-300 bg-gray-50 rounded-md overflow-hidden focus-within:ring-2 focus-within:ring-indigo-400",children:e.jsx("input",{type:"password",id:"confirmPassword",value:m,onChange:s=>b(s.target.value),className:"flex-1 px-3 py-2 outline-none border-none bg-transparent",placeholder:"Confirm new password",required:!0})})]}),e.jsx("button",{type:"submit",disabled:u||!o||!n,className:"w-full bg-transparent border border-gray-300 text-black font-bold py-2 px-4 rounded-md focus:outline-none focus:ring-2 disabled:opacity-50",children:u?"Resetting...":"Reset Password"})]}),e.jsx("p",{className:"mt-4 text-xs text-gray-500 text-center",children:"After resetting your password, you'll be redirected to the login page."})]})]})};export{k as default};
